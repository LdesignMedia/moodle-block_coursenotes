define("block_coursenotes/coursenotes",["exports","core/ajax","core/log"],(function(_exports,_ajax,_log){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_log=_interopRequireDefault(_log);_exports.init=()=>{""!==document.getElementById("coursenote-display").textContent.trim()&&(document.getElementById("coursenote-form").style.display="none"),document.getElementById("edit-icon").addEventListener("click",(function(){document.getElementById("coursenote-display").style.display="none",this.style.display="none",document.getElementById("coursenote-form").style.display="block"})),document.getElementById("cancel-button").addEventListener("click",(function(){document.getElementById("coursenote-display").style.display="block",document.getElementById("edit-icon").style.display="block",document.getElementById("coursenote-form").style.display="none"}));const textarea=document.getElementById("coursenote-textarea");let timeoutId;const blockInstanceId=textarea.dataset.blockinstanceid,courseId=textarea.dataset.courseid;textarea.addEventListener("input",(()=>{clearTimeout(timeoutId),textarea.value.length>10&&(timeoutId=setTimeout((()=>{saveNoteAJAX(textarea.value)}),1e4))}));const saveNoteAJAX=note=>{_ajax.default.call([{methodname:"block_coursenotes_save_note",args:{coursenote:note,blockinstanceid:blockInstanceId,courseid:courseId},done:response=>{response.status?_log.default.log("Note saved successfully"):_log.default.log("Error saving note:",response.message)},fail:error=>{_log.default.error("AJAX error: "+JSON.stringify(error))}}])}}}));

//# sourceMappingURL=coursenotes.min.js.map